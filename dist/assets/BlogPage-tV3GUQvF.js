import{r as e,j as t,R as a,L as s,S as n,m as r}from"./index-BE8Yb92W.js";import{u as l}from"./useHtmlMetaData-C8bMR27-.js";import{u as i,a as o,P as d,H as c}from"./HighlightPosts-BgACbbRy.js";import"./react-C7tYskqo.js";function x({categories:a,selectedCategoryId:s,onChange:n}){var r;const[l,i]=e.useState(!1),o=e.useRef(null);e.useEffect(()=>{const e=e=>{o.current&&!o.current.contains(e.target)&&i(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const d=e=>{const t={target:{value:e.toString()},currentTarget:{value:e.toString()}};n(t),i(!1)},c=s?null==(r=a.find(e=>e.id===s))?void 0:r.name:"Todas as categorias";return t.jsxs("fieldset",{className:"flex justify-center items-center py-12 gap-4",children:[t.jsx("legend",{className:"sr-only",children:"Filtrar categorias"}),t.jsx("label",{htmlFor:"category-button",className:"text-lg font-medium text-green-accents-900 whitespace-nowrap",children:"Leia sobre:"}),t.jsxs("div",{className:"relative",ref:o,children:[t.jsxs("button",{id:"category-button",type:"button",onClick:()=>i(!l),className:"min-w-[220px] px-5 py-1 pr-10 text-lg font-medium text-green-accents-900 bg-white border-2 border-green-soft-300 rounded-full cursor-pointer hover:border-brand-400 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-opacity-20 transition-all duration-200 text-left","aria-haspopup":"listbox","aria-expanded":l,children:[c,t.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:t.jsx("svg",{className:"w-5 h-5 text-green-accents-600 transition-transform duration-200 "+(l?"rotate-180":""),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),l&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border-2 border-green-soft-300 rounded-2xl shadow-lg overflow-hidden z-50 animate-in fade-in slide-in-from-top-1 duration-200",children:t.jsxs("ul",{role:"listbox",className:"py-2 max-h-64 overflow-y-auto",children:[t.jsx("li",{children:t.jsx("button",{type:"button",onClick:()=>d(0),className:"cursor-pointer w-full px-5 py-3 text-left hover:bg-green-soft-200 transition-colors duration-150 "+(null===s||0===s?"bg-green-soft-300 text-green-accents-900 font-medium":"text-neutral-700"),role:"option","aria-selected":null===s||0===s,children:"Todas as categorias"})}),a.map(e=>t.jsx("li",{children:t.jsx("button",{type:"button",onClick:()=>d(e.id),className:"cursor-pointer w-full px-5 py-3 text-left hover:bg-green-soft-200 transition-colors duration-150 "+(s===e.id?"bg-green-soft-300 text-green-accents-900 font-medium":"text-neutral-700"),role:"option","aria-selected":s===e.id,children:e.name})},e.id))]})})]}),t.jsxs("select",{id:"category",value:s||0,onChange:n,className:"sr-only","aria-hidden":"true",tabIndex:-1,children:[t.jsx("option",{value:0,children:"Todas as categorias"}),a.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})]})}const m={primary:"bg-[#1B1F24] text-white",secondary:"bg-gray-600 text-white",accent:"bg-blue-600 text-white"},u={primary:"text-green-accents-600 underline  hover:text-brand-400",secondary:"bg-gray-600 text-white hover:bg-gray-700",outline:"border border-teal-600 text-teal-600 hover:bg-teal-50"},g=e.memo(({children:e,className:a})=>t.jsx("div",{className:`w-[264px] h-[420px] bg-white rounded-2xl shadow-lg overflow-hidden flex flex-col ${a||""}`,children:e})),h=e.memo(({children:e,alt:s,className:n})=>t.jsx("div",{className:`w-[264px] h-[160px] overflow-hidden flex-shrink-0 ${n||""}`,children:a.isValidElement(e)&&"img"===e.type?a.cloneElement(e,{className:"w-full h-full object-cover",alt:s||"Blog image",loading:"lazy",decoding:"async",width:264,height:160}):e})),p=e.memo(({children:e,variant:a="primary",className:s})=>t.jsx("div",{className:"px-4 pt-4 absolute mt-32",children:t.jsx("span",{className:`inline-block px-2 py-1 text-[10px] leading-3 font-normal rounded ${m[a]} ${s||""}`,children:e})})),f=e.memo(({children:e,className:a,maxLength:s=80,id:n})=>{const r=(null==e?void 0:e.toString())||"",l=r.length>=s,i=l?`${r.substring(0,s-4)}...`:r;return t.jsx("div",{id:n,className:"px-4 py-6",children:t.jsx("h1",{className:`text-base font-bold leading-6 text-neutral-700 ${a||""}`,title:l?r:void 0,children:i})})}),b=e.memo(({children:e,className:a,maxLength:s=170})=>{const n=(null==e?void 0:e.toString())||"",r=n.length>=s?`${n.substring(0,s-3)}...`:n;return t.jsx("div",{className:"px-4 flex-grow",children:t.jsx("p",{className:`text-xs font-normal leading-4 text-gray-600 ${a||""}`,children:r})})}),j=e.memo(({children:e,onClick:a,variant:s="primary",disabled:n=!1,className:r})=>t.jsx("div",{className:"pb-6 mt-auto",children:t.jsx("button",{type:"button",onClick:a,disabled:n,className:`cursor-pointer py-2 px-4 text-sm font-medium rounded-lg transition-colors ${u[s]} ${n?"opacity-50 cursor-not-allowed":""} ${r||""}`,children:e})})),v=Object.assign(g,{Image:h,Badge:p,Title:f,Content:b,Button:j}),y=e.memo(({post:a,categories:n,stripHtml:r})=>{const{categoryInfo:l,imageUrl:i}=function({post:t,categories:a,excludeCategoryId:s=2}){var n,r,l;return{categoryInfo:e.useMemo(()=>{var e,n;const r=t.categories.find(e=>e!==s),l=null!=(n=null==(e=null==a?void 0:a.find(e=>e.id===r))?void 0:e.name)?n:"Sem categoria";return{validCategoryId:r,categoryName:l}},[t.categories,a,s]),imageUrl:(null==(l=null==(r=null==(n=t._embedded)?void 0:n["wp:featuredmedia"])?void 0:r[0])?void 0:l.source_url)||"/fallback.jpg"}}({post:a,categories:n});return t.jsx("article",{className:"group","aria-labelledby":`post-title-${a.id}`,children:t.jsxs(v,{children:[t.jsx(v.Image,{children:t.jsx("img",{src:i,alt:a.title.rendered})}),t.jsx(v.Badge,{children:l.categoryName}),t.jsx(v.Title,{id:`post-title-${a.id}`,children:a.title.rendered}),t.jsx(v.Content,{children:r(a.content.rendered)}),t.jsx(s,{to:`/blog/${a.slug}`,children:t.jsx(v.Button,{children:"Saiba Mais"})})]})})});function N({currentPage:e,totalPages:a,onPageChange:n}){const r=Math.min(a,5);return t.jsx("nav",{"aria-label":"Paginação",children:t.jsxs("ul",{role:"list",className:"flex justify-center gap-1 pt-[72px] pb-[54px]",children:[Array.from({length:r},(e,t)=>t+1).map(a=>t.jsx("li",{children:t.jsx(s,{to:`?page=${a}`,onClick:()=>n(a),className:"w-8 h-8 flex items-center justify-center rounded-full text-[12px] font-medium shadow "+(a===e?"bg-brand-500 text-white hover:bg-brand-700":"bg-white text-green-accents-600 hover:bg-brand-500 hover:text-white"),children:a})},a)),a>5&&t.jsx("li",{children:t.jsx("span",{className:"w-8 h-8 flex items-center justify-center text-[12px] font-medium text-green-accents-600",children:"..."})})]})})}function w(){var a;const[s,l]=e.useState(1),[m,u]=e.useState(null),{data:g,isLoading:h,isError:p}=o({page:s,categoryId:m}),{categories:f}=function(t=[]){const{data:a,isLoading:s,isError:n}=i();return{categories:e.useMemo(()=>a?a.filter(e=>!t.includes(e.id)):[],[a,t]),isLoading:s,isError:n}}([1,2]),b=e=>{const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""},j=e.useMemo(()=>{var e;return null!=(e=null==g?void 0:g.posts)?e:[]},[g]),v=null!=(a=null==g?void 0:g.totalPages)?a:1;return h?t.jsx(n,{message:"Carregando..."}):p?t.jsx(d,{}):t.jsxs(r.section,{"aria-labelledby":"blog-heading",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"w-full max-w-[1128px] flex flex-col mx-auto py-4",children:[t.jsx(x,{categories:f,selectedCategoryId:m,onChange:e=>{const t=Number(e.target.value);u(0===t?null:t),l(1)}}),t.jsxs("div",{className:"flex gap-8",children:[t.jsx("div",{className:"flex-1",children:j.length>0?t.jsxs(t.Fragment,{children:[t.jsx("h1",{id:"blog-heading",className:"text-center md:text-start text-2xl font-medium text-brand-400 pb-9",children:"Últimas notícias"}),t.jsx("ul",{role:"list",className:"mx-auto grid justify-center [grid-template-columns:264px] sm:[grid-template-columns:repeat(3,264px)] grid-rows-2 gap-4",children:j.map(e=>t.jsx("li",{children:t.jsx(y,{post:e,categories:f,stripHtml:b})},e.id))})]}):t.jsx("h1",{className:"text-xl font-medium text-gray-600 pb-9 px-4 md:px-0",children:"Nenhum post ainda foi adicionado ao blog..."})}),t.jsx("aside",{className:"hidden md:block",children:t.jsx(c,{})})]}),t.jsx(N,{currentPage:s,totalPages:v,onPageChange:l})]})}function C(){return t.jsx("section",{id:"cursos",role:"banner","aria-label":"Banner de Cursos e Treinamentos","aria-labelledby":"titulo-cursos",className:"relative w-full h-[440px] text-white",style:{backgroundImage:"url('/blog-page/hero-blog.webp')",backgroundSize:"cover"},children:t.jsx("header",{className:"relative z-20 max-w-[1128px] mx-auto h-full flex items-center px-4 md:px-0",children:t.jsxs("div",{className:"max-w-[480px]",children:[t.jsxs("h1",{id:"titulo-cursos",className:"text-[32px] sm:text-[36px] md:text-[40px] font-bold leading-tight",children:["Blog da EPSSO:",t.jsx("br",{})]}),t.jsx("p",{className:"text-[32px] sm:text-[36px] md:text-[40px] font-normal leading-snug",children:"informação de qualidade e boas práticas para você e sua sua empresa"})]})})})}function S(){return l({title:"EPSSO | Blog",metaDescription:"Leia as últimas notícias e artigos do nosso blog sobre diversos temas."}),t.jsxs("main",{className:"w-full",children:[t.jsx(C,{}),t.jsx(w,{})]})}export{S as default};
