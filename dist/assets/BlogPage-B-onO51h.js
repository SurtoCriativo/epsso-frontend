import{r as l,j as e,R as h,L as p,S as b,m as j}from"./index-tpDFUHgD.js";import{u as v}from"./useHtmlMetaData-Qs8pYG67.js";import{u as w,a as y,P as N,H as B}from"./HighlightPosts-CPge4kFM.js";function C(t=[]){const{data:s,isLoading:n,isError:a}=w();return{categories:l.useMemo(()=>s?s.filter(o=>!t.includes(o.id)):[],[s,t]),isLoading:n,isError:a}}function S(){return s=>{const n=document.createElement("div");return n.innerHTML=s,n.textContent||n.innerText||""}}function $({categories:t,selectedCategoryId:s,onChange:n}){const[a,r]=l.useState(!1),o=l.useRef(null);l.useEffect(()=>{const i=x=>{o.current&&!o.current.contains(x.target)&&r(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[]);const c=i=>{const x={target:{value:i.toString()},currentTarget:{value:i.toString()}};n(x),r(!1)},d=s?t.find(i=>i.id===s)?.name:"Todas as categorias";return e.jsxs("fieldset",{className:"flex justify-center items-center py-12 gap-4",children:[e.jsx("legend",{className:"sr-only",children:"Filtrar categorias"}),e.jsx("label",{htmlFor:"category-button",className:"text-lg font-medium text-green-accents-900 whitespace-nowrap",children:"Leia sobre:"}),e.jsxs("div",{className:"relative",ref:o,children:[e.jsxs("button",{id:"category-button",type:"button",onClick:()=>r(!a),className:"min-w-[220px] px-5 py-1 pr-10 text-lg font-medium text-green-accents-900 bg-white border-2 border-green-soft-300 rounded-full cursor-pointer hover:border-brand-400 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-opacity-20 transition-all duration-200 text-left","aria-haspopup":"listbox","aria-expanded":a,children:[d,e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:e.jsx("svg",{className:`w-5 h-5 text-green-accents-600 transition-transform duration-200 ${a?"rotate-180":""}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),a&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border-2 border-green-soft-300 rounded-2xl shadow-lg overflow-hidden z-50 animate-in fade-in slide-in-from-top-1 duration-200",children:e.jsxs("ul",{role:"listbox",className:"py-2 max-h-64 overflow-y-auto",children:[e.jsx("li",{children:e.jsx("button",{type:"button",onClick:()=>c(0),className:`cursor-pointer w-full px-5 py-3 text-left hover:bg-green-soft-200 transition-colors duration-150 ${s===null||s===0?"bg-green-soft-300 text-green-accents-900 font-medium":"text-neutral-700"}`,role:"option","aria-selected":s===null||s===0,children:"Todas as categorias"})}),t.map(i=>e.jsx("li",{children:e.jsx("button",{type:"button",onClick:()=>c(i.id),className:`cursor-pointer w-full px-5 py-3 text-left hover:bg-green-soft-200 transition-colors duration-150 ${s===i.id?"bg-green-soft-300 text-green-accents-900 font-medium":"text-neutral-700"}`,role:"option","aria-selected":s===i.id,children:i.name})},i.id))]})})]}),e.jsxs("select",{id:"category",value:s||0,onChange:n,className:"sr-only","aria-hidden":"true",tabIndex:-1,children:[e.jsx("option",{value:0,children:"Todas as categorias"}),t.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})]})}function P({post:t,categories:s,excludeCategoryId:n=2}){const a=l.useMemo(()=>{const o=t.categories.find(d=>d!==n),c=s?.find(d=>d.id===o)?.name??"Sem categoria";return{validCategoryId:o,categoryName:c}},[t.categories,s,n]),r=t._embedded?.["wp:featuredmedia"]?.[0]?.source_url||"/fallback.jpg";return{categoryInfo:a,imageUrl:r}}const T={primary:"bg-[#1B1F24] text-white",secondary:"bg-gray-600 text-white",accent:"bg-blue-600 text-white"},k={primary:"text-green-accents-600 underline  hover:text-brand-400",secondary:"bg-gray-600 text-white hover:bg-gray-700",outline:"border border-teal-600 text-teal-600 hover:bg-teal-50"},E=l.memo(({children:t,className:s})=>e.jsx("div",{className:`w-[264px] h-[420px] bg-white rounded-2xl shadow-lg overflow-hidden flex flex-col ${s||""}`,children:t})),H=l.memo(({children:t,alt:s,className:n})=>e.jsx("div",{className:`w-[264px] h-[160px] overflow-hidden flex-shrink-0 ${n||""}`,children:h.isValidElement(t)&&t.type==="img"?h.cloneElement(t,{className:"w-full h-full object-cover",alt:s||"Blog image",loading:"lazy",decoding:"async",width:264,height:160}):t})),L=l.memo(({children:t,variant:s="primary",className:n})=>e.jsx("div",{className:"px-4 pt-4 absolute mt-32",children:e.jsx("span",{className:`inline-block px-2 py-1 text-[10px] leading-3 font-normal rounded ${T[s]} ${n||""}`,children:t})})),M=l.memo(({children:t,className:s,maxLength:n=80,id:a})=>{const r=t?.toString()||"",o=r.length>=n,c=o?`${r.substring(0,n-4)}...`:r;return e.jsx("div",{id:a,className:"px-4 py-6",children:e.jsx("h1",{className:`text-base font-bold leading-6 text-neutral-700 ${s||""}`,title:o?r:void 0,children:c})})}),F=l.memo(({children:t,className:s,maxLength:n=170})=>{const a=t?.toString()||"",o=a.length>=n?`${a.substring(0,n-3)}...`:a;return e.jsx("div",{className:"px-4 flex-grow",children:e.jsx("p",{className:`text-xs font-normal leading-4 text-gray-600 ${s||""}`,children:o})})}),R=l.memo(({children:t,onClick:s,variant:n="primary",disabled:a=!1,className:r})=>e.jsx("div",{className:"pb-6 mt-auto",children:e.jsx("button",{type:"button",onClick:s,disabled:a,className:`cursor-pointer py-2 px-4 text-sm font-medium rounded-lg transition-colors ${k[n]} ${a?"opacity-50 cursor-not-allowed":""} ${r||""}`,children:t})})),m=Object.assign(E,{Image:H,Badge:L,Title:M,Content:F,Button:R}),O=({post:t,categories:s,stripHtml:n})=>{const{categoryInfo:a,imageUrl:r}=P({post:t,categories:s});return e.jsx("article",{className:"group","aria-labelledby":`post-title-${t.id}`,children:e.jsxs(m,{children:[e.jsx(m.Image,{children:e.jsx("img",{src:r,alt:t.title.rendered})}),e.jsx(m.Badge,{children:a.categoryName}),e.jsx(m.Title,{id:`post-title-${t.id}`,children:t.title.rendered}),e.jsx(m.Content,{children:n(t.content.rendered)}),e.jsx(p,{to:`/blog/${t.slug}`,children:e.jsx(m.Button,{children:"Saiba Mais"})})]})})},V=l.memo(O);function z({currentPage:t,totalPages:s,onPageChange:n}){const r=Math.min(s,5);return e.jsx("nav",{"aria-label":"Paginação",children:e.jsxs("ul",{role:"list",className:"flex justify-center gap-1 pt-[72px] pb-[54px]",children:[Array.from({length:r},(o,c)=>c+1).map(o=>e.jsx("li",{children:e.jsx(p,{to:`?page=${o}`,onClick:()=>n(o),className:`w-8 h-8 flex items-center justify-center rounded-full text-[12px] font-medium shadow ${o===t?"bg-brand-500 text-white hover:bg-brand-700":"bg-white text-green-accents-600 hover:bg-brand-500 hover:text-white"}`,children:o})},o)),s>5&&e.jsx("li",{children:e.jsx("span",{className:"w-8 h-8 flex items-center justify-center text-[12px] font-medium text-green-accents-600",children:"..."})})]})})}function _(){const[t,s]=l.useState(1),[n,a]=l.useState(null),{data:r,isLoading:o,isError:c}=y({page:t,categoryId:n}),{categories:d}=C([1,2]),i=S(),x=l.useMemo(()=>r?.posts??[],[r]),f=r?.totalPages??1;return o?e.jsx(b,{message:"Carregando..."}):c?e.jsx(N,{}):e.jsxs(j.section,{"aria-labelledby":"blog-heading",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"w-full max-w-[1128px] flex flex-col mx-auto py-4",children:[e.jsx($,{categories:d,selectedCategoryId:n,onChange:u=>{const g=Number(u.target.value);a(g===0?null:g),s(1)}}),e.jsxs("div",{className:"flex gap-8",children:[e.jsx("div",{className:"flex-1",children:x.length>0?e.jsxs(e.Fragment,{children:[e.jsx("h1",{id:"blog-heading",className:"text-center md:text-start text-2xl font-medium text-brand-400 pb-9",children:"Últimas notícias"}),e.jsx("ul",{role:"list",className:"mx-auto grid justify-center [grid-template-columns:264px] sm:[grid-template-columns:repeat(3,264px)] grid-rows-2 gap-4",children:x.map(u=>e.jsx("li",{children:e.jsx(V,{post:u,categories:d,stripHtml:i})},u.id))})]}):e.jsx("h1",{className:"text-xl font-medium text-gray-600 pb-9",children:"Nenhum post ainda foi adicionado ao blog..."})}),e.jsx("aside",{className:"hidden md:block",children:e.jsx(B,{})})]}),e.jsx(z,{currentPage:t,totalPages:f,onPageChange:s})]})}function D(){return e.jsx("section",{id:"cursos",role:"banner","aria-label":"Banner de Cursos e Treinamentos","aria-labelledby":"titulo-cursos",className:"relative w-full h-[440px] text-white",style:{backgroundImage:"url('/blog-page/hero-blog.webp')",backgroundSize:"cover"},children:e.jsx("header",{className:"relative z-20 max-w-[1128px] mx-auto h-full flex items-center px-4 md:px-0",children:e.jsxs("div",{className:"max-w-[480px]",children:[e.jsxs("h1",{id:"titulo-cursos",className:"text-[32px] sm:text-[36px] md:text-[40px] font-bold leading-tight",children:["Segurança em",e.jsx("br",{}),"foco: ",e.jsx("span",{className:"font-normal",children:"boas práticas"})]}),e.jsx("p",{className:"text-[32px] sm:text-[36px] md:text-[40px] font-normal leading-snug",children:"que salvam vidas."})]})})})}function I(){return v({title:"EPSSO | Blog",metaDescription:"Leia as últimas notícias e artigos do nosso blog sobre diversos temas."}),e.jsxs("main",{className:"w-full",children:[e.jsx(D,{}),e.jsx(_,{})]})}export{I as default};
