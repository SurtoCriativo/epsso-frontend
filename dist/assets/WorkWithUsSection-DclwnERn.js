import{j as e,A as a,m as s}from"./index-BE8Yb92W.js";import{o as l,i as t,s as r,u as o,a as i,b as n}from"./useEmail-D4Gqw_Pf.js";import{u as c}from"./useHtmlMetaData-C8bMR27-.js";import"./react-C7tYskqo.js";const m=l({name:r().min(1,"Campo obrigatório"),lastname:r().min(1,"Campo obrigatório"),phone:r().min(14,"Telefone inválido").max(15,"Telefone inválido"),email:r().email("E-mail inválido"),city:r().min(1,"Campo obrigatório"),state:r().min(1,"Campo obrigatório"),message:r().max(120,"Máximo de 120 caracteres").optional(),file:t(File,{message:"Arquivo obrigatório"}).refine(e=>e.size>0,"Arquivo obrigatório").refine(e=>["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(e.type),{message:"Envie um arquivo PDF ou DOC"})}),d=[{value:"AC",label:"Acre"},{value:"AL",label:"Alagoas"},{value:"AP",label:"Amapá"},{value:"AM",label:"Amazonas"},{value:"BA",label:"Bahia"},{value:"CE",label:"Ceará"},{value:"DF",label:"Distrito Federal"},{value:"ES",label:"Espírito Santo"},{value:"GO",label:"Goiás"},{value:"MA",label:"Maranhão"},{value:"MT",label:"Mato Grosso"},{value:"MS",label:"Mato Grosso do Sul"},{value:"MG",label:"Minas Gerais"},{value:"PA",label:"Pará"},{value:"PB",label:"Paraíba"},{value:"PR",label:"Paraná"},{value:"PE",label:"Pernambuco"},{value:"PI",label:"Piauí"},{value:"RJ",label:"Rio de Janeiro"},{value:"RN",label:"Rio Grande do Norte"},{value:"RS",label:"Rio Grande do Sul"},{value:"RO",label:"Rondônia"},{value:"RR",label:"Roraima"},{value:"SC",label:"Santa Catarina"},{value:"SP",label:"São Paulo"},{value:"SE",label:"Sergipe"},{value:"TO",label:"Tocantins"}],u={endpoint:"https://epsso.com.br/cms/wp-json/custom/v1/upload",username:void 0,appPassword:void 0};const p=new class{async uploadToWordPress(e){var a,s,l,t;const r=new FormData;r.append("file",e);try{const o=await fetch(u.endpoint,{method:"POST",body:r});if(!o.ok){const e=await o.json().catch(()=>({}));throw new Error(e.message||`Upload failed with status ${o.status}`)}const i=await o.json(),n=(null==(a=i.data)?void 0:a.url)||i.url||i.file_url||i.path||i.source_url;if(!n)throw new Error("Upload successful but no URL returned");return{url:n,filename:(null==(s=i.data)?void 0:s.filename)||i.filename||e.name,size:(null==(l=i.data)?void 0:l.size)||i.size||e.size,type:(null==(t=i.data)?void 0:t.type)||i.type||e.type}}catch(o){throw{message:"Erro ao fazer upload do arquivo",code:"WORDPRESS_UPLOAD_ERROR",details:o}}}async uploadToWordPressMedia(e){const a=new FormData;a.append("file",e),a.append("title",e.name);const s={};try{const l=await fetch("https://epsso.com.br/cms/wp-json/wp/v2/media",{method:"POST",body:a,headers:s});if(!l.ok){const e=await l.json().catch(()=>({}));throw new Error(e.message||`Upload failed with status ${l.status}`)}const t=await l.json();return{url:t.source_url,filename:t.title.rendered||e.name,size:e.size,type:t.mime_type||e.type}}catch(l){throw{message:"Erro ao fazer upload do arquivo",code:"WORDPRESS_MEDIA_UPLOAD_ERROR",details:l}}}};function x(){var l;const{register:t,handleSubmit:r,formState:{errors:c},watch:u,reset:x,setValue:h}=i({resolver:n(m),mode:"onBlur"}),b=u("message")||"",{sendJobApplication:f,isLoading:g,isSuccess:v,isError:j,error:y,reset:w}=((e={})=>{const a=o({templateType:"jobApplication",onSuccess:a=>{var s;null==(s=e.onSuccess)||s.call(e)},onError:a=>{var s;null==(s=e.onError)||s.call(e,a)}});return{sendJobApplication:async s=>{var l;try{const l=s.file,t=await p.uploadToWordPress(l);if(!t.url)throw new Error("Upload successful but no URL returned");const r={name:s.name,lastname:s.lastname,phone:s.phone,email:s.email,city:s.city,state:s.state,message:s.message||"Sem mensagem adicional",file:t.url,file_url:t.url,file_name:t.filename||l.name,file_size:`${(l.size/1024/1024).toFixed(2)} MB`,file_type:l.type,page_source:e.pageSource||"Trabalhe Conosco",submitted_at:(new Date).toLocaleString("pt-BR")};a.mutate(r)}catch(y){null==(l=e.onError)||l.call(e,{message:"Erro ao processar candidatura",code:"FILE_UPLOAD_ERROR",details:y})}},isLoading:a.isPending,isSuccess:a.isSuccess,isError:a.isError,error:a.error,reset:a.reset}})({onSuccess:()=>{x()}});return e.jsx(a,{mode:"wait",children:v?e.jsxs(s.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"bg-white text-gray-800 w-full max-w-none min-h-[756px] rounded-2xl shadow-lg p-[32px_24px] flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mb-6",children:e.jsx("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Obrigado pelo seu interesse em fazer parte do time EPSSO!"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Seu currículo foi recebido com sucesso e será incluído em nosso Banco de Talentos para oportunidades futuras."}),e.jsx("button",{onClick:()=>{x(),w()},className:"text-green-600 hover:text-green-700 underline text-sm font-medium cursor-pointer",children:"Enviar outra candidatura"})]},"success"):e.jsxs(s.form,{onSubmit:r(e=>{f(e)}),initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:-30},transition:{duration:.6,ease:"easeOut"},className:"bg-white text-gray-800 w-full max-w-none min-h-[597px] rounded-2xl shadow-lg p-[32px_24px] flex flex-col justify-between overflow-y-auto relative",children:[g&&e.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm rounded-2xl flex items-center justify-center z-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Enviando candidatura..."})]})}),j&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:e.jsx("p",{className:"text-red-600 text-sm",children:(null==y?void 0:y.message)||"Erro ao enviar. Por favor, tente novamente."})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-[16px]",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nome"}),e.jsx("input",{type:"text",...t("name"),placeholder:"Seu Nome",className:"input w-full py-3 px-4 h-[48px]"}),c.name&&e.jsx("span",{className:"text-red-500 text-sm",children:c.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Sobrenome"}),e.jsx("input",{type:"text",...t("lastname"),placeholder:"Seu Sobrenome",className:"input w-full py-3 px-4 h-[48px]"}),c.lastname&&e.jsx("span",{className:"text-red-500 text-sm",children:c.lastname.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Telefone (WhatsApp)"}),e.jsx("input",{type:"text",...t("phone"),placeholder:"(00) 00000-0000",className:"input w-full py-3 px-4 h-[48px]",maxLength:15}),c.phone&&e.jsx("span",{className:"text-red-500 text-sm",children:c.phone.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"E-mail"}),e.jsx("input",{type:"email",...t("email"),placeholder:"exemplo@seuemail.com.br",className:"input w-full py-3 px-4 h-[48px]"}),c.email&&e.jsx("span",{className:"text-red-500 text-sm",children:c.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cidade"}),e.jsx("input",{type:"text",...t("city"),placeholder:"Sua cidade",className:"input w-full py-3 px-4 h-[48px]"}),c.city&&e.jsx("span",{className:"text-red-500 text-sm",children:c.city.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Estado"}),e.jsxs("select",{...t("state"),className:"custom-select w-full h-[48px] px-3",children:[e.jsx("option",{value:"",children:"Selecione"}),d.map(a=>e.jsxs("option",{value:a.value,children:[a.label," (",a.value,")"]},a.value))]}),c.state&&e.jsx("span",{className:"text-red-500 text-sm",children:c.state.message})]}),e.jsxs("div",{className:"mt-3.5 mb-3.5 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Currículo (PDF ou DOC)"}),e.jsx("input",{type:"file",accept:"application/pdf,.doc,.docx",onChange:e=>{var a;const s=null==(a=e.target.files)?void 0:a[0];s&&h("file",s,{shouldValidate:!0})},className:"\r\n    w-full text-sm text-gray-700 \r\n    file:mr-4 file:py-2 file:px-4 file:rounded-full \r\n    file:border-[1.5px] file:border-dark-green-300 \r\n    file:bg-white file:text-dark-green-300 \r\n    hover:file:bg-gray-100\r\n    file:text-sm file:font-semibold \r\n    file:cursor-pointer\r\n    transition\r\n  "}),c.message&&e.jsx("span",{className:"text-red-500 text-sm",children:null==(l=c.message)?void 0:l.message})]}),e.jsxs("div",{className:"md:col-span-2 relative",children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Mensagem ",e.jsx("span",{className:"text-gray-500",children:"(opcional)"})]}),e.jsx("textarea",{rows:5,maxLength:120,...t("message"),placeholder:"Gostaria de nos informar mais algum detalhe?",className:"input resize-none w-full py-3 px-4 h-[121px]"}),e.jsxs("div",{className:"absolute bottom-2 right-4 text-right text-xs text-gray-400",children:[b.length,"/120"]}),c.message&&e.jsx("span",{className:"text-red-500 text-sm",children:c.message.message})]})]}),e.jsx("button",{type:"submit",disabled:g,className:"bg-dark-green-300 cursor-pointer hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-full w-[169px] h-[48px] mx-auto mt-8 text-white transition",children:g?"Enviando...":"Enviar"})]},"form")})}function h(){return c({title:"EPSSO | Trabalhe Conosco",metaDescription:"Você pode enviar seu currículo para recrutamento@epsso.com.br ou preencha o formulário desta página para entrar em contato conosco e enviar seu currículo."}),e.jsx(s.section,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"w-full bg-white py-[48px] md:py-[120px] px-4",children:e.jsxs("div",{className:"max-w-[1128px] mx-auto grid grid-cols-1 md:grid-cols-[512px_512px] md:gap-[120px] items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-[24px] font-semibold text-brand-400 mb-6",children:"Faça parte do nosso time."}),e.jsx("img",{src:"/forms/trabalhe-conosco.svg",alt:"Equipe EPSSO",width:552,height:312,className:"w-full max-w-[512px] h-auto mb-6 rounded-lg"}),e.jsxs("p",{className:"text-sm text-neutral-700 leading-relaxed",children:["Você pode enviar seu currículo para"," ",e.jsx("span",{className:"font-semibold text-neutral-900",children:"recrutamento@epsso.com.br"})," ","ou preencha o formulário desta página para entrar em contato conosco e enviar seu currículo."]}),e.jsx("p",{className:"text-sm text-neutral-700 leading-relaxed mt-4",children:"Para que o formulário seja enviado, todos os campos devem ser preenchidos."})]}),e.jsx(x,{})]})})}export{h as default};
