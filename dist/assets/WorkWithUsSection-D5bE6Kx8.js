import{j as e,A as y,m}from"./index-Rb_83lJ8.js";import{o as w,i as N,s as c,u as S,a as E,b as P}from"./useEmail-C7xhltIz.js";import{u as R}from"./useHtmlMetaData-Bg2jj1ZF.js";const A=w({name:c().min(1,"Campo obrigatório"),lastname:c().min(1,"Campo obrigatório"),phone:c().min(14,"Telefone inválido").max(15,"Telefone inválido"),email:c().email("E-mail inválido"),city:c().min(1,"Campo obrigatório"),state:c().min(1,"Campo obrigatório"),message:c().max(120,"Máximo de 120 caracteres").optional(),file:N(File,{message:"Arquivo obrigatório"}).refine(r=>r.size>0,"Arquivo obrigatório").refine(r=>["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(r.type),{message:"Envie um arquivo PDF ou DOC"})}),O=[{value:"AC",label:"Acre"},{value:"AL",label:"Alagoas"},{value:"AP",label:"Amapá"},{value:"AM",label:"Amazonas"},{value:"BA",label:"Bahia"},{value:"CE",label:"Ceará"},{value:"DF",label:"Distrito Federal"},{value:"ES",label:"Espírito Santo"},{value:"GO",label:"Goiás"},{value:"MA",label:"Maranhão"},{value:"MT",label:"Mato Grosso"},{value:"MS",label:"Mato Grosso do Sul"},{value:"MG",label:"Minas Gerais"},{value:"PA",label:"Pará"},{value:"PB",label:"Paraíba"},{value:"PR",label:"Paraná"},{value:"PE",label:"Pernambuco"},{value:"PI",label:"Piauí"},{value:"RJ",label:"Rio de Janeiro"},{value:"RN",label:"Rio Grande do Norte"},{value:"RS",label:"Rio Grande do Sul"},{value:"RO",label:"Rondônia"},{value:"RR",label:"Roraima"},{value:"SC",label:"Santa Catarina"},{value:"SP",label:"São Paulo"},{value:"SE",label:"Sergipe"},{value:"TO",label:"Tocantins"}],C={wordpress:{endpoint:"https://epsso.com.br/cms/wp-json/custom/v1/upload",username:void 0,appPassword:void 0}};class _{async uploadToWordPress(t){const o=new FormData;o.append("file",t);try{const s=await fetch(C.wordpress.endpoint,{method:"POST",body:o});if(!s.ok){const n=await s.json().catch(()=>({}));throw new Error(n.message||`Upload failed with status ${s.status}`)}const a=await s.json();console.log("WordPress upload response:",a);const l=a.data?.url||a.url||a.file_url||a.path||a.source_url;if(!l)throw console.error("No URL found in WordPress response:",a),new Error("Upload successful but no URL returned");return{url:l,filename:a.data?.filename||a.filename||t.name,size:a.data?.size||a.size||t.size,type:a.data?.type||a.type||t.type}}catch(s){throw console.error("WordPress upload error:",s),{message:"Erro ao fazer upload do arquivo",code:"WORDPRESS_UPLOAD_ERROR",details:s}}}async uploadToWordPressMedia(t){const o=new FormData;o.append("file",t),o.append("title",t.name);const s={};try{const a=await fetch("https://epsso.com.br/cms/wp-json/wp/v2/media",{method:"POST",body:o,headers:s});if(!a.ok){const n=await a.json().catch(()=>({}));throw new Error(n.message||`Upload failed with status ${a.status}`)}const l=await a.json();return{url:l.source_url,filename:l.title.rendered||t.name,size:t.size,type:l.mime_type||t.type}}catch(a){throw console.error("WordPress Media upload error:",a),{message:"Erro ao fazer upload do arquivo",code:"WORDPRESS_MEDIA_UPLOAD_ERROR",details:a}}}}const k=new _,F=(r={})=>{const t=S({templateType:"jobApplication",onSuccess:s=>{console.log("Job application submitted:",s),r.onSuccess?.()},onError:s=>{console.error("Job application failed:",s),r.onError?.(s)}});return{sendJobApplication:async s=>{try{const a=s.file;console.log("Uploading file to WordPress...");const l=await k.uploadToWordPress(a);if(console.log("Upload result:",l),!l.url)throw new Error("Upload successful but no URL returned");const n={name:s.name,lastname:s.lastname,phone:s.phone,email:s.email,city:s.city,state:s.state,message:s.message||"Sem mensagem adicional",file:l.url,file_url:l.url,file_name:l.filename||a.name,file_size:`${(a.size/1024/1024).toFixed(2)} MB`,file_type:a.type,page_source:r.pageSource||"Trabalhe Conosco",submitted_at:new Date().toLocaleString("pt-BR")};console.log("Email payload being sent:",n),console.log("File URL in payload:",n.file),t.mutate(n)}catch(a){console.error("Error processing application:",a),r.onError?.({message:"Erro ao processar candidatura",code:"FILE_UPLOAD_ERROR",details:a})}},isLoading:t.isPending,isSuccess:t.isSuccess,isError:t.isError,error:t.error,reset:t.reset}};function L(){const{register:r,handleSubmit:t,formState:{errors:o},watch:s,reset:a,setValue:l}=E({resolver:P(A),mode:"onBlur"}),n=s("message")||"",{sendJobApplication:u,isLoading:d,isSuccess:x,isError:h,error:b,reset:g}=F({onSuccess:()=>{a()}}),f=i=>{u(i)},v=()=>{a(),g()},j=i=>{const p=i.target.files?.[0];p&&l("file",p,{shouldValidate:!0})};return e.jsx(y,{mode:"wait",children:x?e.jsxs(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"bg-white text-gray-800 w-full max-w-none min-h-[756px] rounded-2xl shadow-lg p-[32px_24px] flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mb-6",children:e.jsx("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Obrigado pelo seu interesse em fazer parte do time EPSSO!"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Seu currículo foi recebido com sucesso e será incluído em nosso Banco de Talentos para oportunidades futuras."}),e.jsx("button",{onClick:v,className:"text-green-600 hover:text-green-700 underline text-sm font-medium cursor-pointer",children:"Enviar outra candidatura"})]},"success"):e.jsxs(m.form,{onSubmit:t(f),initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:-30},transition:{duration:.6,ease:"easeOut"},className:"bg-white text-gray-800 w-full max-w-none min-h-[597px] rounded-2xl shadow-lg p-[32px_24px] flex flex-col justify-between overflow-y-auto relative",children:[d&&e.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm rounded-2xl flex items-center justify-center z-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Enviando candidatura..."})]})}),h&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:e.jsx("p",{className:"text-red-600 text-sm",children:b?.message||"Erro ao enviar. Por favor, tente novamente."})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-[16px]",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nome"}),e.jsx("input",{type:"text",...r("name"),placeholder:"Seu Nome",className:"input w-full py-3 px-4 h-[48px]"}),o.name&&e.jsx("span",{className:"text-red-500 text-sm",children:o.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Sobrenome"}),e.jsx("input",{type:"text",...r("lastname"),placeholder:"Seu Sobrenome",className:"input w-full py-3 px-4 h-[48px]"}),o.lastname&&e.jsx("span",{className:"text-red-500 text-sm",children:o.lastname.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Telefone (WhatsApp)"}),e.jsx("input",{type:"text",...r("phone"),placeholder:"(00) 00000-0000",className:"input w-full py-3 px-4 h-[48px]",maxLength:15}),o.phone&&e.jsx("span",{className:"text-red-500 text-sm",children:o.phone.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"E-mail"}),e.jsx("input",{type:"email",...r("email"),placeholder:"exemplo@seuemail.com.br",className:"input w-full py-3 px-4 h-[48px]"}),o.email&&e.jsx("span",{className:"text-red-500 text-sm",children:o.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cidade"}),e.jsx("input",{type:"text",...r("city"),placeholder:"Sua cidade",className:"input w-full py-3 px-4 h-[48px]"}),o.city&&e.jsx("span",{className:"text-red-500 text-sm",children:o.city.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Estado"}),e.jsxs("select",{...r("state"),className:"custom-select w-full h-[48px] px-3",children:[e.jsx("option",{value:"",children:"Selecione"}),O.map(i=>e.jsxs("option",{value:i.value,children:[i.label," (",i.value,")"]},i.value))]}),o.state&&e.jsx("span",{className:"text-red-500 text-sm",children:o.state.message})]}),e.jsxs("div",{className:"mt-3.5 mb-3.5 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Currículo (PDF ou DOC)"}),e.jsx("input",{type:"file",accept:"application/pdf,.doc,.docx",onChange:j,className:`\r
    w-full text-sm text-gray-700 \r
    file:mr-4 file:py-2 file:px-4 file:rounded-full \r
    file:border-[1.5px] file:border-dark-green-300 \r
    file:bg-white file:text-dark-green-300 \r
    hover:file:bg-gray-100\r
    file:text-sm file:font-semibold \r
    file:cursor-pointer\r
    transition\r
  `}),o.message&&e.jsx("span",{className:"text-red-500 text-sm",children:o.message?.message})]}),e.jsxs("div",{className:"md:col-span-2 relative",children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Mensagem ",e.jsx("span",{className:"text-gray-500",children:"(opcional)"})]}),e.jsx("textarea",{rows:5,maxLength:120,...r("message"),placeholder:"Gostaria de nos informar mais algum detalhe?",className:"input resize-none w-full py-3 px-4 h-[121px]"}),e.jsxs("div",{className:"absolute bottom-2 right-4 text-right text-xs text-gray-400",children:[n.length,"/120"]}),o.message&&e.jsx("span",{className:"text-red-500 text-sm",children:o.message.message})]})]}),e.jsx("button",{type:"submit",disabled:d,className:"bg-dark-green-300 cursor-pointer hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-full w-[169px] h-[48px] mx-auto mt-8 text-white transition",children:d?"Enviando...":"Enviar"})]},"form")})}function z(){return R({title:"EPSSO | Trabalhe Conosco",metaDescription:"Você pode enviar seu currículo para recrutamento@epsso.com.br ou preencha o formulário desta página para entrar em contato conosco e enviar seu currículo."}),e.jsx(m.section,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"w-full bg-white py-[48px] md:py-[120px] px-4",children:e.jsxs("div",{className:"max-w-[1128px] mx-auto grid grid-cols-1 md:grid-cols-[512px_512px] md:gap-[120px] items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-[24px] font-semibold text-brand-400 mb-6",children:"Faça parte do nosso time."}),e.jsx("img",{src:"/forms/trabalhe-conosco.svg",alt:"Equipe EPSSO",width:552,height:312,className:"w-full max-w-[512px] h-auto mb-6 rounded-lg"}),e.jsxs("p",{className:"text-sm text-neutral-700 leading-relaxed",children:["Você pode enviar seu currículo para"," ",e.jsx("span",{className:"font-semibold text-neutral-900",children:"recrutamento@epsso.com.br"})," ","ou preencha o formulário desta página para entrar em contato conosco e enviar seu currículo."]}),e.jsx("p",{className:"text-sm text-neutral-700 leading-relaxed mt-4",children:"Para que o formulário seja enviado, todos os campos devem ser preenchidos."})]}),e.jsx(L,{})]})})}export{z as default};
